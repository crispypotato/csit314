CREATE SCHEMA `cafems` ;

BEGIN;

SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS EMPLOYEE;
DROP TABLE IF EXISTS ROLE;
SET FOREIGN_KEY_CHECKS = 1;

CREATE TABLE EMPLOYEE(
EMP_ID 		int NOT NULL AUTO_INCREMENT,
EMP_NAME	varchar(25) NOT NULL,
EMP_SALARY 	double NOT NULL,
EMP_DATEJOINED	varchar(25) NOT NULL,
EMP_ROLEID 	int NOT NULL,
EMP_USERNAME	varchar(25) UNIQUE,
EMP_PASSWORD 	varchar(255) NOT NULL,
EMP_POSITION	varchar(25),

PRIMARY KEY (EMP_ID)
) ENGINE = INNODB;

CREATE TABLE PROFILE(
PROFILE_ID 	int NOT NULL,
PROFILE_NAME 	varchar(25) NOT NULL,

PRIMARY KEY (ROLE_ID)
) ENGINE = INNODB;

ALTER TABLE EMPLOYEE ADD FOREIGN KEY (EMP_ROLEID) REFERENCES PROFILE(PROFILE_ID);
ALTER TABLE EMPLOYEE AUTO_INCREMENT=10001;

COMMIT;

insert into profile values(0, "default");
insert into profile values(1, "System Admin");
insert into profile values(2, "Cafe Owner");
insert into profile values(3, "Cafe Manager");
insert into profile values(4, "Cafe Staff");